{
  "$schema": "https://www.raycast.com/schemas/extension.json",
  "name": "anki-ai-raycast",
  "title": "Anki",
  "description": "Anki extension for Raycast",
  "icon": "extension-icon.png",
  "categories": [
    "Productivity",
    "Applications",
    "Other"
  ],
  "keywords": [
    "memory",
    "flashcards",
    "study"
  ],
  "author": "anton-suprun",
  "preferences": [
    {
      "name": "port",
      "type": "textfield",
      "required": false,
      "title": "anki-connect port",
      "description": "Port that anki-connect uses. (Default: 8765)"
    },
    {
      "name": "allow_dup_cards",
      "type": "checkbox",
      "label": "Allow Duplicate Cards",
      "required": false,
      "description": "If selected, duplicate cards can be created"
    },
    {
      "name": "dup_scope",
      "type": "dropdown",
      "title": "Duplicate Scope",
      "data": [
        {
          "title": "Deck",
          "value": "deck"
        },
        {
          "title": "Entire Collection",
          "value": "collection"
        }
      ],
      "default": "deck",
      "required": false,
      "description": "Can be used to specify the scope for which duplicates are checked"
    },
    {
      "name": "default_deck",
      "type": "textfield",
      "required": false,
      "title": "Default Deck",
      "description": "Deck name to pre-select when adding cards (overrides remembered value)"
    },
    {
      "name": "default_model",
      "type": "textfield",
      "required": false,
      "title": "Default Note Type",
      "description": "Note type (model) to pre-select when adding cards (overrides remembered value)"
    },
    {
      "name": "default_tags",
      "type": "textfield",
      "required": false,
      "title": "Default Tags",
      "description": "Comma-separated tags applied automatically to new cards"
    },
    {
      "name": "ai_enabled",
      "type": "checkbox",
      "label": "Enable AI Assist",
      "required": false,
      "default": false,
      "description": "Show AI-powered actions for card generation and improvement"
    },
    {
      "name": "ai_provider",
      "type": "dropdown",
      "title": "AI Provider",
      "data": [
        {
          "title": "OpenAI",
          "value": "openai"
        },
        {
          "title": "Anthropic",
          "value": "anthropic"
        },
        {
          "title": "Google Gemini",
          "value": "gemini"
        }
      ],
      "default": "openai",
      "required": false,
      "description": "Which AI provider to use for card generation"
    },
    {
      "name": "ai_api_key",
      "type": "password",
      "required": false,
      "title": "AI API Key",
      "description": "API key for the selected AI provider (stored securely)"
    },
    {
      "name": "ai_model",
      "type": "textfield",
      "required": false,
      "title": "AI Model",
      "description": "Model name (e.g. gpt-4o-mini, claude-sonnet-4-20250514, gemini-2.0-flash). Leave blank for provider default."
    },
    {
      "name": "ai_max_output_tokens",
      "type": "textfield",
      "required": false,
      "title": "AI Max Output Tokens",
      "default": "1024",
      "description": "Maximum tokens in AI response"
    },
    {
      "name": "ai_temperature",
      "type": "textfield",
      "required": false,
      "title": "AI Temperature",
      "default": "0.3",
      "description": "Creativity level (0.0 = deterministic, 1.0 = creative)"
    },
    {
      "name": "ai_note_type_mode",
      "type": "dropdown",
      "title": "AI Note Type Mode",
      "data": [
        {
          "title": "Auto (AI chooses)",
          "value": "auto"
        },
        {
          "title": "Prefer Basic",
          "value": "prefer_basic"
        },
        {
          "title": "Prefer Cloze",
          "value": "prefer_cloze"
        },
        {
          "title": "Basic only",
          "value": "basic_only"
        },
        {
          "title": "Cloze only",
          "value": "cloze_only"
        }
      ],
      "default": "auto",
      "required": false,
      "description": "How AI chooses between Basic and Cloze note types"
    },
    {
      "name": "ai_max_clozes_per_card",
      "type": "textfield",
      "required": false,
      "title": "Max Clozes per Card",
      "default": "2",
      "description": "Maximum cloze deletions per card to keep cards atomic"
    },
    {
      "name": "ai_dry_run",
      "type": "checkbox",
      "label": "AI Dry Run (preview only)",
      "required": false,
      "default": false,
      "description": "Preview AI output without writing to form fields"
    },
    {
      "name": "basic_model_name",
      "type": "textfield",
      "required": false,
      "title": "Basic Model Name",
      "default": "Basic",
      "description": "Name of your Anki Basic note type"
    },
    {
      "name": "cloze_model_name",
      "type": "textfield",
      "required": false,
      "title": "Cloze Model Name",
      "default": "Cloze",
      "description": "Name of your Anki Cloze note type"
    },
    {
      "name": "ai_base_url",
      "type": "textfield",
      "required": false,
      "title": "AI Base URL",
      "description": "Custom API base URL (e.g., Vercel AI Gateway). Leave blank for default provider URL."
    },
    {
      "name": "ai_model_heavy",
      "type": "textfield",
      "required": false,
      "title": "AI Model — Generation & Scoring",
      "description": "Model for card generation, improvement, and quality scoring. Leave blank to use default model."
    },
    {
      "name": "ai_model_light",
      "type": "textfield",
      "required": false,
      "title": "AI Model — Tags & Auto-Fill",
      "description": "Model for tag suggestions, auto-fill, and other quick tasks. Leave blank to use default model."
    },
    {
      "name": "ai_auto_score_on_add",
      "type": "checkbox",
      "label": "Auto-score card before add",
      "required": false,
      "default": true,
      "description": "When enabled, Add Card runs AI quality scoring first and asks for confirmation."
    }
  ],
  "license": "MIT",
  "commands": [
    {
      "name": "decks",
      "title": "Decks",
      "subtitle": "Anki",
      "description": "Lists all Anki decks",
      "mode": "view"
    },
    {
      "name": "browseCards",
      "title": "Browse Cards",
      "subtitle": "Anki",
      "description": "Browse all cards in Anki",
      "mode": "view"
    },
    {
      "name": "addCard",
      "title": "Add Card",
      "subtitle": "Anki",
      "description": "Add a card to a deck in Anki",
      "mode": "view",
      "preferences": [
        {
          "name": "allow_empty_card_fields",
          "type": "checkbox",
          "label": "Allow empty card fields",
          "required": false,
          "description": "Enabling this will allow you to create cards with empty fields"
        },
        {
          "name": "enable_attachments",
          "type": "checkbox",
          "label": "Enable file attachments on cards",
          "required": false,
          "default": false,
          "description": "Show file picker fields for each card field"
        },
        {
          "name": "show_draft_field",
          "type": "checkbox",
          "label": "Show Source Notes field",
          "required": false,
          "default": true,
          "description": "Show a multiline field for pasting raw notes that AI can process into card fields"
        }
      ]
    },
    {
      "name": "viewStats",
      "title": "View Stats",
      "subtitle": "Anki",
      "description": "View Anki collection statistics",
      "mode": "view"
    },
    {
      "name": "generateCards",
      "title": "Generate Cards from Notes",
      "subtitle": "Anki",
      "description": "Use AI to generate multiple flashcards from pasted notes",
      "mode": "view"
    }
  ],
  "dependencies": {
    "@eslint/config-array": "latest",
    "@eslint/object-schema": "latest",
    "@raycast/api": "^1.87.4",
    "@raycast/utils": "^1.17.0",
    "@types/showdown": "^2.0.6",
    "@types/turndown": "^5.0.4",
    "axios": "^1.8.4",
    "glob": "^10.0.0",
    "rimraf": "^5.0.0",
    "rss-parser": "^3.13.0",
    "showdown": "^2.1.0",
    "turndown": "^7.2.0"
  },
  "devDependencies": {
    "@raycast/eslint-config": "1.0.8",
    "@types/node": "20.14.10",
    "@types/react": "18.3.3",
    "eslint": "^8.57.0",
    "prettier": "^3.3.2",
    "typescript": "^5.5.3",
    "vitest": "^4.0.18"
  },
  "scripts": {
    "build": "ray build -e dist",
    "dev": "ray develop",
    "fix-lint": "ray lint --fix",
    "lint": "ray lint",
    "test": "vitest run",
    "test:watch": "vitest",
    "publish": "npx @raycast/api@latest publish"
  }
}
